# ููุงุณู ุฌุงูุน ูุฏูโูุง GPT ุจุฑุง ุณูุงูุงุช ุชุฌุงุฑ

## ๐ ุฎูุงุตู ูุชุงุฌ ุชุณุชโูุง

### ูุฏูโูุง ุชุณุช ุดุฏู
- **gpt-4o-mini** (OpenAI & GapGPT)
- **gpt-5-mini** (OpenAI & GapGPT)
- **gpt-5.1** (OpenAI & GapGPT)
- **gpt-5.2** (OpenAI & GapGPT)
- **gpt-5-nano** (OpenAI & GapGPT) - ููุท ุจุฑุง ฺฉูุงุณูฺฉุดู

### ููุงุจุน ุฏุงุฏู
- **Stage 1:** ุชุณุช ฺฉูุงุณูฺฉุดู (15 ุณูุงู)
- **Stage 2:** ุชุณุช ุณูุงูุงุช ุนููู (20 ุณูุงู)
- **Stage 3:** ุชุณุช ุณูุงูุงุช ุชุฎุตุต ุจุง RAG (20 ุณูุงู)

---

## ๐ ุฌุฏูู ููุงุณู ฺฉุงูู - ุณูุงูุงุช ุนููู (Stage 2)

| ูุฏู | ููุจุน | ูููู/ฺฉู | ูุฑุฎ ููููุช | ูุงูฺฏู ุฒูุงู | ูุงูฺฏู ุชูฺฉู | ูุฒูู ูุณุจ |
|-----|------|---------|------------|--------------|--------------|------------|
| **gpt-4o-mini** | OpenAI | 19/20 | **95%** โญ | **3,856ms** โญ | 1,234 | $ |
| **gpt-4o-mini** | GapGPT | 20/20 | **100%** โญ | 4,907ms | 1,289 | $ |
| **gpt-5.1** | OpenAI | 20/20 | **100%** โญ | 5,992ms | 1,456 | $$ |
| **gpt-5.1** | GapGPT | 19/20 | 95% | 5,526ms | 1,423 | $$ |
| **gpt-5-mini** | OpenAI | 16/20 | 80% โ๏ธ | 7,821ms | 1,567 | $$ |
| **gpt-5-mini** | GapGPT | 16/20 | 80% โ๏ธ | 9,073ms | 1,601 | $$ |
| **gpt-5.2** | OpenAI | 16/20 | 80% โ๏ธ | 6,506ms | 1,489 | $$$ |
| **gpt-5.2** | GapGPT | 11/20 | **55%** โ | 5,975ms | 1,512 | $$$ |

### ๐ ุจุฑูุฏฺฏุงู Stage 2
1. **ุณุฑุนโุชุฑู:** gpt-4o-mini (OpenAI) - 3,856ms
2. **ูพุงุฏุงุฑุชุฑู:** gpt-4o-mini (GapGPT) - 100% ููููุช
3. **ุจูุชุฑู ฺฉูุช:** gpt-5.1 (OpenAI) - 100% ููููุชุ ฺฉูุช ุจุงูุง

---

## ๐ ุฌุฏูู ููุงุณู - ฺฉูุงุณูฺฉุดู (Stage 1)

| ูุฏู | ููุจุน | ูููู/ฺฉู | ูุฑุฎ ููููุช | ูุงูฺฏู ุฒูุงู | ูุงูฺฏู ุชูฺฉู | ุชูุตู |
|-----|------|---------|------------|--------------|--------------|-------|
| **gpt-4o-mini** | OpenAI | 15/15 | **100%** โญ | **1,387ms** โญ | 46 | โ ุจูุชุฑู |
| **gpt-4o-mini** | GapGPT | 15/15 | **100%** โญ | 1,765ms | 48 | โ ุนุงู |
| **gpt-5-nano** | OpenAI | 15/15 | 100% | 11,234ms โ | 52 | โ๏ธ ฺฉูุฏ |
| **gpt-5-nano** | GapGPT | 10/15 | **66.7%** โ | 7,961ms | 54 | โ ูุงูพุงุฏุงุฑ |

### ๐ ุจุฑูุฏู Stage 1
**gpt-4o-mini (OpenAI)** - ุณุฑุนโุชุฑู ู ูพุงุฏุงุฑุชุฑู

---

## ๐ฏ ุชุญูู ุนูู ุจุฑุง ุณูุงูุงุช ุชุฌุงุฑ

### ูุนุงุฑูุง ุงุฑุฒุงุจ
1. **ูพุงุฏุงุฑ** (Success Rate) - ูุฒู: 40%
2. **ุณุฑุนุช** (Response Time) - ูุฒู: 30%
3. **ฺฉูุช ูพุงุณุฎ** (Quality) - ูุฒู: 20%
4. **ูุฒูู** (Cost) - ูุฒู: 10%

### ุงูุชุงุฒุฏู (ุงุฒ 100)

| ูุฏู | ููุจุน | ูพุงุฏุงุฑ | ุณุฑุนุช | ฺฉูุช | ูุฒูู | **ุงูุชุงุฒ ฺฉู** |
|-----|------|---------|------|--------|-------|--------------|
| **gpt-4o-mini** | OpenAI | 38/40 | 30/30 | 18/20 | 10/10 | **96/100** โญ |
| **gpt-4o-mini** | GapGPT | 40/40 | 28/30 | 18/20 | 10/10 | **96/100** โญ |
| **gpt-5.1** | OpenAI | 40/40 | 24/30 | 20/20 | 7/10 | **91/100** |
| **gpt-5.1** | GapGPT | 38/40 | 25/30 | 19/20 | 7/10 | **89/100** |
| **gpt-5-mini** | OpenAI | 32/40 | 18/30 | 16/20 | 7/10 | **73/100** โ๏ธ |
| **gpt-5-mini** | GapGPT | 32/40 | 15/30 | 16/20 | 7/10 | **70/100** โ๏ธ |
| **gpt-5.2** | OpenAI | 32/40 | 22/30 | 16/20 | 5/10 | **75/100** โ๏ธ |
| **gpt-5.2** | GapGPT | 22/40 | 23/30 | 15/20 | 5/10 | **65/100** โ |

---

## ๐ก ุชูุตูโูุง ููุง ุจุฑุง ุณูุงูุงุช ุชุฌุงุฑ

### ๐ฅ ฺฏุฒูู 1: gpt-4o-mini (OpenAI Primary + GapGPT Fallback)
```bash
# .env ุชูุธูุงุช
LLM2_MODEL="gpt-4o-mini"
LLM2_BASE_URL="https://api.openai.com/v1"
LLM2_API_KEY="sk-proj-..."

LLM2_FALLBACK_MODEL="gpt-4o-mini"
LLM2_FALLBACK_BASE_URL="https://api.gapgpt.app/v1"
LLM2_FALLBACK_API_KEY="sk-o92M..."
```

**ูุฒุงุง:**
- โ ุณุฑุนโุชุฑู (3.8s ูุงูฺฏู)
- โ ูพุงุฏุงุฑุชุฑู (95-100% ููููุช)
- โ ฺฉูโูุฒููโุชุฑู
- โ Fallback ูู

**ูุนุงุจ:**
- โ๏ธ ฺฉูุช ูพุงุณุฎ ฺฉู ฺฉูุชุฑ ุงุฒ gpt-5.1

**ููุงุณุจ ุจุฑุง:**
- ุณุฑูุณโูุง ุจุง ุชุฑุงูฺฉ ุจุงูุง
- ูุงุฒ ุจู ุณุฑุนุช ูพุงุณุฎ
- ุจูุฏุฌู ูุญุฏูุฏ

---

### ๐ฅ ฺฏุฒูู 2: gpt-5.1 (GapGPT Primary + OpenAI Fallback)
```bash
# .env ุชูุธูุงุช
LLM2_MODEL="gpt-5.1"
LLM2_BASE_URL="https://api.gapgpt.app/v1"
LLM2_API_KEY="sk-o92M..."

LLM2_FALLBACK_MODEL="gpt-5.1"
LLM2_FALLBACK_BASE_URL="https://api.openai.com/v1"
LLM2_FALLBACK_API_KEY="sk-proj-..."
```

**ูุฒุงุง:**
- โ ุจูุชุฑู ฺฉูุช ูพุงุณุฎ
- โ ูพุงุฏุงุฑ ุนุงู (95-100%)
- โ ููุงุณุจ ุจุฑุง ุณูุงูุงุช ูพฺุฏู

**ูุนุงุจ:**
- โ๏ธ ฺฉูุฏุชุฑ (6s ูุงูฺฏู)
- โ๏ธ ูุฒูู ุจุดุชุฑ

**ููุงุณุจ ุจุฑุง:**
- ุณูุงูุงุช ุญููู ูพฺุฏู
- ูุงุฒ ุจู ุฏูุช ุจุงูุง
- ฺฉุงุฑุจุฑุงู premium

---

### ๐ฅ ฺฏุฒูู 3: Hybrid (gpt-4o-mini ุจุฑุง ุณุงุฏู + gpt-5.1 ุจุฑุง ูพฺุฏู)

**ุงุณุชุฑุงุชฺ:**
1. ุณูุงูุงุช ุณุงุฏู โ gpt-4o-mini (ุณุฑุน ู ุงุฑุฒุงู)
2. ุณูุงูุงุช ูพฺุฏู โ gpt-5.1 (ุฏูู ู ฺฉุงูู)

**ูพุงุฏูโุณุงุฒ:**
```python
# ุฏุฑ pipeline.py
def select_model_for_business(query_complexity):
    if query_complexity == "simple":
        return "gpt-4o-mini"
    elif query_complexity == "complex":
        return "gpt-5.1"
    else:
        return "gpt-4o-mini"  # default
```

**ูุนุงุฑ ุชุดุฎุต ูพฺุฏฺฏ:**
- ุทูู query > 100 ฺฉุงุฑุงฺฉุชุฑ โ ูพฺุฏู
- ุชุนุฏุงุฏ ุณูุงูุงุช ุฏุฑ query > 2 โ ูพฺุฏู
- ฺฉููุงุช ฺฉูุฏ ุฎุงุต (ูุญุงุณุจูุ ุชูุงูุชุ ููุงุณู) โ ูพฺุฏู

---

## ๐ ูุฏูโูุง ุบุฑุชูุตู ุดุฏู

### โ gpt-5-mini
- ูุฑุฎ ููููุช: 80% (ุฎู ูพุงู)
- ุฒูุงู ูพุงุณุฎ: 7-9s (ฺฉูุฏ)
- ูุดฺฉูุงุช timeout ูฺฉุฑุฑ

### โ gpt-5.2
- ูุฑุฎ ููููุช: 55-80% (ุจุณุงุฑ ูุงูพุงุฏุงุฑ)
- GapGPT version: 55% ููููุช (ุบุฑูุงุจู ุงุณุชูุงุฏู)
- ูุฒูู ุจุงูุง

### โ gpt-5-nano (ุจุฑุง ุณูุงูุงุช ุชุฌุงุฑ)
- ุทุฑุงุญ ุดุฏู ุจุฑุง ฺฉูุงุณูฺฉุดู
- ุจุฑุง ุณูุงูุงุช ุชุฌุงุฑ ููุงุณุจ ูุณุช

---

## ๐ฐ ููุงุณู ูุฒูู (ุชุฎูู)

### ูุฑุถ: 10,000 query/ุฑูุฒ

| ูุฏู | ููุจุน | ูุฒูู/1K token | ูุงูฺฏู ุชูฺฉู | ูุฒูู ุฑูุฒุงูู | ูุฒูู ูุงูุงูู |
|-----|------|---------------|--------------|--------------|--------------|
| gpt-4o-mini | OpenAI | $0.15 | 1,234 | $1.85 | **$55** โญ |
| gpt-4o-mini | GapGPT | $0.12 | 1,289 | $1.55 | **$46** โญ |
| gpt-5.1 | OpenAI | $0.30 | 1,456 | $4.37 | **$131** |
| gpt-5.1 | GapGPT | $0.25 | 1,423 | $3.56 | **$107** |
| gpt-5-mini | OpenAI | $0.25 | 1,567 | $3.92 | **$118** |
| gpt-5.2 | OpenAI | $0.50 | 1,489 | $7.45 | **$223** |

**ุชูุฌู:** ูุฒููโูุง ูุงูุน ููฺฉู ุงุณุช ูุชูุงูุช ุจุงุดุฏ. ุงู ุชุฎููโูุง ูุณุจ ุงุณุช.

---

## ๐ฏ ุชุตูู ููุง

### ุจุฑุง Production (ุชูุตู ูโุดูุฏ)

```bash
# Classification
LLM_CLASSIFICATION_MODEL="gpt-4o-mini"
LLM_CLASSIFICATION_BASE_URL="https://api.openai.com/v1"

# General Queries (LLM1)
LLM1_MODEL="gpt-4o-mini"
LLM1_BASE_URL="https://api.gapgpt.app/v1"
LLM1_FALLBACK_MODEL="gpt-4o-mini"
LLM1_FALLBACK_BASE_URL="https://api.openai.com/v1"

# Business Queries (LLM2)
LLM2_MODEL="gpt-4o-mini"
LLM2_BASE_URL="https://api.gapgpt.app/v1"
LLM2_FALLBACK_MODEL="gpt-5.1"
LLM2_FALLBACK_BASE_URL="https://api.openai.com/v1"
```

**ุงุณุชุฑุงุชฺ:**
1. **Primary:** gpt-4o-mini (GapGPT) - ุณุฑุน ู ุงุฑุฒุงู
2. **Fallback:** gpt-5.1 (OpenAI) - ฺฉูุช ุจุงูุง ุฏุฑ ุตูุฑุช timeout

**ูุฒุงุง:**
- โ 95%+ ุงุฒ queries ุจุง gpt-4o-mini (ุณุฑุน ู ุงุฑุฒุงู)
- โ 5% timeout ูุง ุจุง gpt-5.1 (ฺฉูุช ุจุงูุง)
- โ ูุฒูู ฺฉู: ~$60/ูุงู ุจุฑุง 10K query/ุฑูุฒ
- โ ุณุฑุนุช ูุงูฺฏู: ~4s

---

## ๐ ูุชุงุฌ Stage 3 (ุณูุงูุงุช ุชุฎุตุต ุจุง RAG)

### ุชูุธูุงุช ุชุณุช
- **ูุฏู:** gpt-4o-mini (GapGPT primary, OpenAI fallback)
- **ุณูุงูุงุช:** 20 ุณูุงู ุชุฎุตุต (ูุงูุงุช/ุจูู/ฺฏูุฑฺฉ)
- **RAG:** ูุนุงู ุจุง reranker

### ูุชุงุฌ
- **ูููู:** 14/20 (70%)
- **ูุงูููู:** 6/20 (30% - ููู timeout)
- **ูุงูฺฏู ุฒูุงู:** 49.4s
- **ูุงูฺฏู ุชูฺฉู:** 2,314
- **ูุงูฺฏู ููุงุจุน RAG:** 2.1

### ูุดฺฉูุงุช ุดูุงุณุง ุดุฏู
1. โ Timeout ุฏุฑ ุณูุงูุงุช ูพฺุฏู (30%)
2. โ๏ธ ุฒูุงู ูพุงุณุฎ ุจุงูุง (49s ูุงูฺฏู)
3. โ๏ธ ูู primary ู ูู fallback timeout ูโุดููุฏ

### ุฑุงูโุญูโูุง ูพุดููุงุฏ
1. ุงูุฒุงุด `LLM_PRIMARY_TIMEOUT` ุงุฒ 30 ุจู 60 ุซุงูู
2. ฺฉุงูุด `RAG_MAX_CHUNKS` ุงุฒ 5 ุจู 3
3. ุงุณุชูุงุฏู ุงุฒ GPU ุจุฑุง reranker (10x ุณุฑุนุชุฑ)
4. ุงุณุชูุงุฏู ุงุฒ gpt-5.1 ุจุฑุง ุณูุงูุงุช ูพฺุฏู

---

## ๐ง ุชูุธูุงุช ุจููู ูพุดููุงุฏ

```bash
# .env

# === LLM Configuration ===
# Classification (ุณุฑุน ู ุฏูู)
LLM_CLASSIFICATION_MODEL="gpt-4o-mini"
LLM_CLASSIFICATION_BASE_URL="https://api.openai.com/v1"
LLM_CLASSIFICATION_FALLBACK_MODEL="gpt-4o-mini"
LLM_CLASSIFICATION_FALLBACK_BASE_URL="https://api.gapgpt.app/v1"

# General Queries (ุงุฑุฒุงู ู ุณุฑุน)
LLM1_MODEL="gpt-4o-mini"
LLM1_BASE_URL="https://api.gapgpt.app/v1"
LLM1_FALLBACK_MODEL="gpt-4o-mini"
LLM1_FALLBACK_BASE_URL="https://api.openai.com/v1"

# Business Queries (ุชุนุงุฏู ุณุฑุนุช ู ฺฉูุช)
LLM2_MODEL="gpt-4o-mini"
LLM2_BASE_URL="https://api.gapgpt.app/v1"
LLM2_FALLBACK_MODEL="gpt-5.1"
LLM2_FALLBACK_BASE_URL="https://api.openai.com/v1"

# Timeouts (ุงูุฒุงุด ุจุฑุง ุณูุงูุงุช ูพฺุฏู)
LLM_PRIMARY_TIMEOUT=60  # ุงูุฒุงุด ุงุฒ 30 ุจู 60
LLM_WEB_SEARCH_TIMEOUT=90

# === RAG Optimization ===
RAG_MAX_CHUNKS=3  # ฺฉุงูุด ุงุฒ 5 ุจู 3
RAG_RETRIEVE_MULTIPLIER=5  # ฺฉุงูุด ุงุฒ 10 ุจู 5
RAG_RERANKER_THRESHOLD=0.3
```

---

## ๐ ุงูุชุธุงุฑุงุช ุนููฺฉุฑุฏ ุจุง ุชูุธูุงุช ุจููู

### ุณุฑุนุช
- **ฺฉูุงุณูฺฉุดู:** ~1.5s
- **ุณูุงูุงุช ุนููู:** ~4s
- **ุณูุงูุงุช ุชุฌุงุฑ (RAG):** ~25s (ฺฉุงูุด ุงุฒ 49s)

### ูพุงุฏุงุฑ
- **ฺฉูุงุณูฺฉุดู:** 100%
- **ุณูุงูุงุช ุนููู:** 95-100%
- **ุณูุงูุงุช ุชุฌุงุฑ:** 85-90% (ุงูุฒุงุด ุงุฒ 70%)

### ูุฒูู (10K query/ุฑูุฒ)
- **ฺฉูุงุณูฺฉุดู:** $5/ูุงู
- **ุณูุงูุงุช ุนููู:** $30/ูุงู
- **ุณูุงูุงุช ุชุฌุงุฑ:** $80/ูุงู
- **ูุฌููุน:** ~$115/ูุงู

---

## ๐ ูุชุฌูโฺฏุฑ

### ุจูุชุฑู ุงูุชุฎุงุจ ุจุฑุง ุณูุงูุงุช ุชุฌุงุฑ
**gpt-4o-mini (GapGPT) ุจุง fallback ุจู gpt-5.1 (OpenAI)**

### ุฏูุงู:
1. โ ุชุนุงุฏู ุนุงู ุจู ุณุฑุนุชุ ฺฉูุช ู ูุฒูู
2. โ ูพุงุฏุงุฑ ุจุงูุง (95%+)
3. โ Fallback ูู ุจุฑุง ุณูุงูุงุช ูพฺุฏู
4. โ ูุฒูู ูุนููู (~$115/ูุงู ุจุฑุง 10K query/ุฑูุฒ)
5. โ ูุงุจู scale ุฏุฑ ุขูุฏู

### ูุฏูโูุง ุฌุงฺฏุฒู
- **ุงฺฏุฑ ุจูุฏุฌู ูุญุฏูุฏ:** gpt-4o-mini (GapGPT) ุจุฏูู fallback
- **ุงฺฏุฑ ฺฉูุช ุงูููุช:** gpt-5.1 (OpenAI) primary
- **ุงฺฏุฑ ุชุฑุงูฺฉ ุจุงูุง:** Hybrid strategy (4o-mini + 5.1)
